language: py
name: bad_eq_eq
message: "Comparing '@a' to itself is useless"
pattern: |
  (
    (comparison_operator (identifier)@a (identifier) @b )
    (#eq? @a @b)
  )  @bad_eq_eq
filters:
  # Allow `__init__` and `__eq__` functions to have redundant comparisons
  - pattern-not-inside: |
      (
        (function_definition name:(identifier) @fn_name)
        (#match? @fn_name "__(init|eq)__")
      )
  # Allow `assertTrue` and `assertFalse` to have redundant comparisons
  - pattern-not-inside: |
      ((call function:(_)@fn_name)
        (#any-of? @fn_name  "assertTrue" "assertFalse" "assert"))

exclude:
  - venv/*
  - build/*
  - bin/*
