# .globstar/no_debugger.yml

language: js 
name: js_no_debugger 
message: Remove the debugger statement before committing your code

# Capture name must be the same as the checker's `name` field.
# Nested captures are allowed to have arbitrary names
pattern: |
  (call_expression
      function: (member_expression
        object: (identifier) @object
        (#eq? @object "location")
        property: (property_identifier) @property
        (#eq? @property "assign")
      )
    arguments: (arguments
    
        [(member_expression
        	object : (call_expression
            	function : (member_expression
                  object : (identifier) @dom_object
                  (#eq? @dom_object "document")
                  property: (property_identifier) @dom_method
                  (#eq? @dom_method "getElementById")
                )
                arguments : (arguments
                	
                )
            )
                  ;;property: (property_identifier) @dom_method
        )
        (call_expression
            function: (member_expression
              object: (new_expression
                constructor: (identifier) @constructor
                (#eq? @constructor "URLSearchParams")
                arguments: (arguments
                	(member_expression
                    	object : (member_expression
                          object: (identifier) @win
                          (#eq? @win "window")
                          property: (property_identifier) @win_prop
                          (#eq? @win_prop "location")
                        )
                    property: (property_identifier) @search_prop
                    (#eq? @search_prop "search")
                    )
                 )
                
                )
              property: (property_identifier) @search_method
              (#eq? @search_method "get")
              )
        )]
        
    )
  ) 

filters:
  # This will not flag any debugger statements
  # nested inside catch blocks
  - pattern-not-inside: (catch_clause)
  # Only match debugger statements inside a function
  # (or some other node that is inside a function)
  # - pattern-inside:     (function_declaration)

# files matching these patterns are excluded from analysis
exclude:
  - test/*
  - build/*
  - bin/*

description: |
  The `debugger` statement is a debugging tool that is not meant to be committed to the repository. It can cause the application to stop unexpectedly and is generally considered bad practice. Remove the `debugger` statement before committing your code.
